# Finforme - Personal Finance Manager

Веб-приложение для управления личными финансами с поддержкой двойной записи (double-entry bookkeeping).

## Технологии

- **Backend**: Go 1.21+
- **Frontend**: HTML + htmx для динамических обновлений
- **База данных**: SQLite
- **Стиль**: Bootstrap 5

## Возможности

- ✅ Управление счетами с иерархической структурой
- ✅ Транзакции с двойной записью (дебет/кредит)
- ✅ Поддержка нескольких валют
- ✅ Теги для категоризации транзакций
- ✅ Аутентификация пользователей
- ✅ Импорт данных из GnuCash SQLite
- ✅ Динамический интерфейс с htmx (без перезагрузки страниц)

## Быстрый старт

### Установка зависимостей

```bash
go mod download
```

### Запуск приложения

```bash
# Разработка
make run

# Или напрямую
go run cmd/server/main.go
```

Приложение будет доступно по адресу: http://localhost:8080

### Сборка

```bash
make build
```

Исполняемый файл будет создан в `./bin/finforme`

## Структура проекта

```
.
├── cmd/
│   └── server/          # Точка входа приложения
├── internal/
│   ├── handlers/        # HTTP handlers
│   ├── middleware/      # Middleware (аутентификация и т.д.)
│   └── models/          # Модели данных
├── static/              # Статические файлы (CSS, JS)
├── templates/           # HTML шаблоны
├── finforme.db          # SQLite база данных
└── README.md
```

## База данных

Приложение использует SQLite с автоматической инициализацией схемы при первом запуске.

### Основные таблицы

- `users` - пользователи системы
- `commodities` - валюты и товары
- `accounts` - счета пользователей
- `transactions` - финансовые транзакции
- `splits` - записи дебета/кредита для транзакций

## Импорт данных

### Из GnuCash

1. Экспортируйте данные из GnuCash в формат SQLite
2. Перейдите в раздел "Настройки" в приложении
3. Загрузите файл SQLite через форму импорта
4. Данные будут автоматически импортированы с сохранением структуры счетов и транзакций

## Разработка

### Требования

- Go 1.21 или выше
- SQLite3

### Полезные команды

```bash
# Запуск в режиме разработки
make run

# Сборка
make build

# Очистка
make clean

# Запуск тестов
make test
```

## API Endpoints

### Аутентификация
- `GET /login` - страница входа
- `POST /login` - вход в систему
- `GET /logout` - выход из системы
- `GET /register` - страница регистрации
- `POST /register` - регистрация нового пользователя

### Финансы
- `GET /finance` - главная страница (список счетов)
- `GET /finance/accounts/{id}` - просмотр транзакций счета
- `GET /finance/accounts/edit/{id}` - редактирование счета
- `GET /finance/transaction/{account_id}/{tx_id}` - просмотр транзакции
- `GET /finance/settings` - настройки и импорт данных

### API
- `POST /api/v1/finance/accounts/save` - сохранение счета
- `POST /api/v1/finance/transactions/save` - сохранение транзакции
- `POST /api/v1/finance/welcome/import` - импорт из GnuCash

## Лицензия

MIT

## Автор

Evgeny Bogdanov
